<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Card치pio Online</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: #f8f9fa;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    .container {
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      width: 90%;
      max-width: 600px;
      text-align: center;
    }
    h1 {
      font-size: 1.8em;
      margin-bottom: 20px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 15px;
    }
    table, th, td {
      border: 1px solid #ddd;
    }
    th, td {
      padding: 10px;
      text-align: center;
    }
    th {
      background: #f1f1f1;
    }
    input[type="number"] {
      width: 60px;
      padding: 5px;
      text-align: center;
    }
    .total {
      font-weight: bold;
      margin: 15px 0;
      font-size: 1.2em;
    }
    button {
      background: #28a745;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1em;
      margin: 5px;
    }
    button:hover {
      background: #218838;
    }
    #qrcode {
      margin-top: 15px;
    }
    #pixCode {
      font-size: 0.9em;
      word-break: break-all;
      margin: 10px 0;
      color: #333;
    }
    .input-nome {
      margin: 10px 0;
      padding: 8px;
      width: 100%;
      max-width: 300px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>游꼢 Card치pio Online</h1>

    <table>
      <thead>
        <tr>
          <th>Produto</th>
          <th>Pre칞o (R$)</th>
          <th>Quantidade</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>PASTEL</td>
          <td>12.00</td>
          <td><input type="number" min="0" value="0" class="qty" data-price="12"></td>
        </tr>
        <tr>
          <td>REFRIGERANTE</td>
          <td>8.00</td>
          <td><input type="number" min="0" value="0" class="qty" data-price="8"></td>
        </tr>
        <tr>
          <td>SUCO</td>
          <td>5.00</td>
          <td><input type="number" min="0" value="0" class="qty" data-price="5"></td>
        </tr>
        <tr>
          <td>BEIJ칔</td>
          <td>8.00</td>
          <td><input type="number" min="0" value="0" class="qty" data-price="8"></td>
        </tr>
        <tr>
          <td>MACARR츾O</td>
          <td>10.00</td>
          <td><input type="number" min="0" value="0" class="qty" data-price="10"></td>
        </tr>
        <tr>
          <td>CANJICA</td>
          <td>6.00</td>
          <td><input type="number" min="0" value="0" class="qty" data-price="6"></td>
        </tr>
      </tbody>
    </table>

    <div class="total">Total: R$ <span id="total">0.00</span></div>

    <!-- Campo para nome do cliente -->
    <input type="text" id="nomeCliente" class="input-nome" placeholder="Digite seu nome">

    <button onclick="gerarPix()">Gerar PIX para Pagamento</button>
    <div id="pixCode"></div>
    <button id="copyBtn" style="display:none;" onclick="copiarPix()">游늶 Copiar C칩digo PIX</button>
    <div id="qrcode"></div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>
  <script>
    const totalElement = document.getElementById("total");
    const qtyInputs = document.querySelectorAll(".qty");

    qtyInputs.forEach(input => {
      input.addEventListener("input", calcularTotal);
    });

    function calcularTotal() {
      let total = 0;
      qtyInputs.forEach(input => {
        total += input.value * input.dataset.price;
      });
      totalElement.textContent = total.toFixed(2);
    }

    function gerarPix() {
      const total = parseFloat(totalElement.textContent);
      const nomeCliente = document.getElementById("nomeCliente").value.trim();

      if (total <= 0) {
        alert("Selecione ao menos 1 item para gerar o PIX!");
        return;
      }
      if (!nomeCliente) {
        alert("Digite seu nome antes de gerar o PIX!");
        return;
      }

      // Dados PIX fixos
      const chavePix = "03980793664"; // sua chave CPF
      const nome = "Avilo Fonseca";
      const cidade = "Montes Claros";
      
      // Montagem do payload PIX (inserindo nome do cliente no campo txid/descri칞칚o)
      const pixPayload = `00020126330014br.gov.bcb.pix0111${chavePix}520400005303986540${total.toFixed(2)}5802BR5913${nome}6013${cidade}6207${nomeCliente}6304ABCD`;

      // Mostrar c칩digo
      document.getElementById("pixCode").textContent = pixPayload;

      // Exibir bot칚o de copiar
      document.getElementById("copyBtn").style.display = "inline-block";

      // Gerar QR Code
      document.getElementById("qrcode").innerHTML = "";
      new QRCode(document.getElementById("qrcode"), {
        text: pixPayload,
        width: 200,
        height: 200
      });
    }

    function copiarPix() {
      const pixCode = document.getElementById("pixCode").textContent;
      navigator.clipboard.writeText(pixCode).then(() => {
        alert("C칩digo PIX copiado com sucesso!");
      });
    }
  </script>
</body>
</html>
